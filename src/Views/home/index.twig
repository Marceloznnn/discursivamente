{% extends 'layouts/base.twig' %}

 {% block styles %}
     <link rel="stylesheet" href="/assets/css/pages/home/index.css">
 {% endblock %}

 {% block content %}
     <section class="hero-slider" aria-label="Destaques da plataforma">
         <div class="slider-container">
             <div class="slider-item active">

                 <div class="slider-bg">
                     <img src="\assets\images\sliders\sliderdiscursivamente1.jpeg" alt="Estudantes em ambiente de aprendizado colaborativo" loading="lazy">
                 </div>
             </div>

             <div class="slider-item">
                 <div class="slider-bg">
                     <img src="\assets\images\sliders\sliderdiscursivamente2.jpeg"  alt="Pessoa lendo livro com vista para montanhas" loading="lazy">
                 </div>
             </div>

             {# #}
         </div>

         <div class="slider-controls">
             <button class="slider-prev" aria-label="Slide anterior"><i class="fas fa-chevron-left"></i></button>
             <div class="slider-dots" role="tablist"></div>
             <button class="slider-next" aria-label="Próximo slide"><i class="fas fa-chevron-right"></i></button>
         </div>
     </section>

     {# Início das Novas Seções #}

     <section class="features-section" aria-labelledby="features-heading">
         <div class="container">
             <h2 id="features-heading">Por que escolher a Discursivamente?</h2>
             <div class="features-list">
                 <div class="feature-item">
                     <i class="fas fa-book-open"></i>
                     <h3>Conteúdo Curado</h3>
                     <p>Acesso a materiais didáticos de alta qualidade e relevância.</p>
                 </div>
                 <div class="feature-item">
                     <i class="fas fa-users"></i>
                     <h3>Comunidade Ativa</h3>
                     <p>Interaja com outros estudantes e especialistas na área.</p>
                 </div>
                 <div class="feature-item">
                     <i class="fas fa-calendar-alt"></i>
                     <h3>Eventos Exclusivos</h3>
                     <p>Participe de webinars, workshops e palestras ao vivo.</p>
                 </div>
                 <div class="feature-item">
                     <i class="fas fa-certificate"></i>
                     <h3>Certificação</h3>
                     <p>Obtenha certificados de conclusão para comprovar seu aprendizado.</p>
                 </div>
             </div>
         </div>
     </section>

<section class="popular-courses-section" aria-labelledby="popular-courses-heading">
  <div class="container">
    <h2 id="popular-courses-heading">Cursos Populares</h2>
    <p class="intro">Descubra os cursos mais procurados por nossa comunidade.</p>

    <div class="course-list">
      {% if popularCourses is defined and popularCourses|length > 0 %}
        {% for course in popularCourses %}
          <div class="course-item" data-index="{{ loop.index0 }}">
            <div class="rank">
              <svg class="crown-icon" viewBox="0 0 24 24">
                <path d="M5 16l-3-8 6 4 4-6 4 6 6-4-3 8H5z"/>
              </svg>
              <span class="rank-number">{{ loop.index }}</span>
            </div>
            <div class="imagem-do-curso">
              <img src="/assets/images/sliders/cursosimg.jpeg" alt="Imagem do curso">
            </div>
            <div class="course-content">
              <h3 class="course-title">{{ course.title }}</h3>
              <p class="course-description">
                {{ course.description|length > 100
                    ? course.description|slice(0, 100) ~ '…'
                    : course.description }}
              </p>
              {% if session.user is defined and course.creatorId == session.user.id %}
                <a href="/teacher/courses/{{ course.id }}" class="course-link">Saiba mais</a>
              {% else %}
                <a href="/courses/{{ course.id }}" class="course-link">Saiba mais</a>
              {% endif %}
            </div>
          </div>
        {% endfor %}
      {% else %}
        <div class="course-empty">
          Nenhum curso popular disponível no momento.
        </div>
      {% endif %}
    </div>
  </div>
</section>


    <div class="slider-nav">
      <button class="nav-btn prev" aria-label="Anterior">←</button>
      <button class="nav-btn next" aria-label="Próximo">→</button>
    </div>

    <div class="slider-dots">
      {% for course in popularCourses %}
        <button class="dot{% if loop.first %} active{% endif %}" data-index="{{ loop.index0 }}"></button>
      {% endfor %}
    </div>

    <div class="courses-ver-todos">
      <a href="/curso" class="btn-ver-todos">Ver todos os cursos</a>
    </div>
  </div>
</section>

<section class="testimonials-section" aria-labelledby="testimonials-heading">
  <div class="container">
    <h2 id="testimonials-heading">O que nossos alunos dizem</h2>

    <div class="testimonials-wrapper">
      <div class="testimonial-item active">
        <p>"A Discursivamente transformou minha forma de aprender. Os cursos são excelentes!"</p>
        <cite>- Maria Silva</cite>
      </div>
      <div class="testimonial-item">
        <p>"Eventos incríveis e uma comunidade muito acolhedora. Recomendo!"</p>
        <cite>- João Santos</cite>
      </div>
      <div class="testimonial-item">
        <p>"Adorei a variedade de conteúdos e a didática dos instrutores. Já sou fã!"</p>
        <cite>- Pedro Lima</cite>
      </div>
      <div class="testimonial-item">
        <p>"O suporte e a interface são impecáveis. Aprendo muito a cada dia."</p>
        <cite>- Ana Oliveira</cite>
      </div>
    </div>
 
    <div class="testimonials-controls">
      <button id="test-prev" aria-label="Depoimento anterior">&larr;</button>
      <button id="test-next" aria-label="Próximo depoimento">&rarr;</button>
    </div>
  </div>
</section>

<section class="split-section">
    <div class="image-side">
        <div class="image-container">
            <img src="https://images.unsplash.com/photo-1636202339022-7d67f7447e3a?q=80&w=1471&auto=format&fit=crop&ixlib=rb-4.1.0&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D" alt="Educação">
        </div>
    </div>
    <div class="text-side">
        <h2>Educação transforma o mundo</h2>
        <p>
            “A educação é a arma mais poderosa que você pode usar para mudar o mundo.”<br>
            <strong>– Nelson Mandela</strong>
        </p>
    </div>
</section>


     <section class="cta-section" aria-labelledby="cta-heading">
         <div class="container">
             <div class="cta-content">
                 <h2 id="cta-heading">Pronto para começar sua jornada de aprendizado?</h2>
                 <p>Explore nosso catálogo completo de cursos e descubra novas possibilidades.</p>
                 <a href="/courses" class="btn btn-primary btn-large">Comece Agora</a>
             </div>
         </div>
     </section>

     {# Fim das Novas Seções #}

     <section class="newsletter-section" aria-labelledby="newsletter-heading">
         <div class="container">
             <div class="newsletter-wrapper">
                 <div class="newsletter-content">
                     <h2 id="newsletter-heading">Fique por dentro das novidades</h2>
                     <p>Receba atualizações sobre novos cursos, eventos e conteúdos exclusivos</p>
                     <ul class="newsletter-benefits">
                         <li><i class="fas fa-check" aria-hidden="true"></i> Conteúdos exclusivos para assinantes</li>
                         <li><i class="fas fa-check" aria-hidden="true"></i> Descontos em cursos e eventos</li>
                         <li><i class="fas fa-check" aria-hidden="true"></i> Primeiro acesso a novas funcionalidades</li>
                     </ul>
                     <div class="social-links">
                         <p>Siga-nos também:</p>
                         <a href="#" aria-label="Facebook"><i class="fab fa-facebook"></i></a>
                         <a href="#" aria-label="Instagram"><i class="fab fa-instagram"></i></a>
                         <a href="#" aria-label="LinkedIn"><i class="fab fa-linkedin"></i></a>
                         <a href="#" aria-label="YouTube"><i class="fab fa-youtube"></i></a>
                     </div>
                 </div>
                 <div class="newsletter-form">
                     <form action="/newsletter/subscribe" method="POST" id="newsletterForm">
                         <div class="form-group">
                             <label for="newsletter-email" class="sr-only">Email</label>
                             <input type="email" id="newsletter-email" name="email" placeholder="Seu melhor e-mail" required aria-required="true">
                             <div class="preference-checkboxes">
                                 <label><input type="checkbox" name="pref_cursos" checked> Cursos</label>
                                 <label><input type="checkbox" name="pref_eventos" checked> Eventos</label>
                                 <label><input type="checkbox" name="pref_conteudos"> Conteúdos</label>
                             </div>
                             <button type="submit" class="btn btn-primary">Inscrever</button>
                         </div>
                     </form>
                 </div>
             </div>
         </div>
     </section>

  <div class="eventos-container">
    <h2 class="eventos-header">Eventos em Destaque</h2>
    <p class="eventos-subheader">Não perca as oportunidades de aprendizado ao vivo</p>

    {% if featuredEvents is empty %}
      <div class="eventos-empty">
        Não há eventos em destaque no momento. Fique ligado!
      </div>
    {% else %}
      <div class="eventos-slider">
        <button class="slider-btn prev-btn">&larr;</button>
        <div class="slider-wrapper">
          {% for event in featuredEvents %}
            <div class="evento-item">
              <div class="evento-image">
                {% if event.image %} 
                  <img src="{{ event.image }}" alt="{{ event.title }}">
                {% endif %}
              </div>
              <div class="evento-content">
                <h3 class="evento-title">{{ event.title }}</h3>
                <div class="evento-date">{{ event.dateTime|date('d/m/Y H:i') }}</div>
                <p class="evento-description">
                  {{ event.description|length > 120 
                     ? event.description|slice(0, 120) ~ '...' 
                     : event.description }}
                </p>
                <a href="/events/{{ event.id }}" class="evento-link">Saiba mais</a>
              </div>
            </div>
          {% endfor %}
        </div>
        <button class="slider-btn next-btn">&rarr;</button>
      </div>
    {% endif %}

    <div class="eventos-ver-todos">
      <a href="/events" class="btn-ver-todos">Ver todos os eventos</a>
    </div>
  </div>

     <div class="chatbot-container" role="dialog" aria-labelledby="chatbot-heading">
         <button class="chatbot-toggle" aria-expanded="false" aria-controls="chatbot-window">
             <i class="fas fa-comments" aria-hidden="true"></i>
             <span class="sr-only">Abrir chat de atendimento</span>
         </button>
         <div id="chatbot-window" class="chatbot-window" aria-hidden="true">
             <div class="chatbot-header">
                 <h3 id="chatbot-heading">Atendimento Discursivamente</h3>
                 <button class="chatbot-close" aria-label="Fechar chat">
                     <i class="fas fa-times" aria-hidden="true"></i>
                 </button>
             </div>
             <div class="chatbot-messages"></div>
             <div class="chatbot-input">
                 <input type="text" placeholder="Digite sua mensagem..." aria-label="Digite sua mensagem">
                 <button aria-label="Enviar mensagem"><i class="fas fa-paper-plane"></i></button>
             </div>
         </div>
     </div>
 {% endblock %}
 {% block scripts %}
     <script src="/assets/js/pages/pages-scripts/slider.js" defer></script>
     <script src="/assets/js/pages/pages-scripts/newsletter.js" defer></script>
     <script src="/assets/js/pages/pages-scripts/faq.js" defer></script> {# Mantido caso o FAQ fosse adicionado #}
     <script src="/assets/js/pages/pages-scripts/chatbot.js" defer></script>
     <script src="/assets/js/pages/home/index.js" defer></script>

     <script src="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/js/all.min.js" integrity="sha512-fzff82+8pzHnwA1mQ0dzz9/E0B+ZRizq08yZfya66INZBz86qKTCt9MLU0NCNIgaMJCgeyhujhasnFUsYMsi0Q==" crossorigin="anonymous" referrerpolicy="no-referrer" async></script>
 {% endblock %}