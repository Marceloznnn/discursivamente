{% extends 'layouts/base.twig' %}

{% block title %}Módulos de {{ course.getTitle() }}{% endblock %}

{% block styles %}
  <link rel="stylesheet" href="/assets/css/pages/curso/aluno/modules.css">
{% endblock %}

{% block content %}
  <div class="container">
    {# Breadcrumb #}
    <nav class="breadcrumb" aria-label="Breadcrumb">
      <ol>
        <li><a href="/courses">Cursos</a></li>
        /<li><a href="/courses/{{ course.getId() }}">{{ course.getTitle() }}</a></li>
        /<li class="current">Módulos</li>
      </ol>
    </nav>

    <h1 class="page-heading">Módulos de {{ course.getTitle() }}</h1>
    {# Nenhum filtro, apenas lista de módulos e materiais #}
    {% if modules is empty %}
      <p class="empty-message">Este curso ainda não possui módulos.</p>
    {% else %}
      <div class="modules-grid">
        {% for module in modules %}
          {% set entries = materials[module.getId()] %}

          <div class="module-card">
            <header class="module-header">
              <h2 class="module-title">{{ module.getTitle() }}</h2>
            </header>

            <div class="module-body">
              {% if entries is empty %}
                <p class="empty-message">Nenhum material disponível.</p>
              {% else %}
                <ul class="materials-list simple-list">
                  {% for entry in entries %}
                    <li class="material-item">
                      <a href="/courses/{{ course.getId() }}/modules/{{ module.getId() }}/material/{{ entry.getId() }}">
                        {{ entry.getTitle() ?: 'Material #' ~ entry.getId() }}
                      </a>
                    </li>
                  {% endfor %}
                </ul>
              {% endif %}
            </div>
          </div>
        {% endfor %}
      </div>
    {% endif %}
  </div>
{% endblock %}

{% block scripts %}
  <script src="/assets/js/pages/curso/aluno/modules.js"></script>
{% endblock %}
