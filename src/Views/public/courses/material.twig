{% extends 'layouts/base.twig' %}

{% block title %}
  {{ entry.getTitle() ?: 'Material' }} – {{ module.getTitle() }}
{% endblock %}

{% block styles %}
  <link rel="stylesheet" href="/assets/css/pages/curso/aluno/material.css">
{% endblock %}

{% block content %}
  <div id="material-container">

    <nav class="breadcrumb" aria-label="Breadcrumb">
      <ol>
        <li><a href="/courses">Cursos</a></li>
        <li><a href="/courses/{{ course.getId() }}">{{ course.getTitle() }}</a></li>
        <li><a href="/courses/{{ course.getId() }}/modules">Módulos</a></li>
        <li class="current">{{ entry.getTitle() ?: 'Material' }}</li>
      </ol>
    </nav>

    <div class="header">
      <h1 id="material-title">{{ entry.getTitle() ?: 'Material #' ~ entry.getId() }}</h1>
    </div>

    <div id="material-content" class="skeleton" data-entry-id="{{ entry.getId() }}">
      {% set url = entry.getContentUrl() %}
      {% set type = entry.getContentType() %}
      {% if type == 'image' %}
        <img src="{{ url }}" alt="{{ entry.getTitle() }}" id="material-image" />
      {% elseif type == 'video' %}
        <video controls id="material-video">
          <source src="{{ url }}" type="video/mp4">
          {% if entry.getSubtitleUrl() %}
            <track label="Português" kind="subtitles" srclang="pt" src="{{ entry.getSubtitleUrl() }}" default>
          {% endif %}
          Seu navegador não suporta vídeos HTML5.
        </video>
      {% else %}
        <a href="{{ url }}" download id="material-download">⬇️ Baixar Arquivo</a>
      {% endif %}
    </div>

    <div class="actions">
      {% if nextEntry %}
        <a href="/courses/{{ course.getId() }}/modules/{{ module.getId() }}/material/{{ nextEntry.getId() }}" id="material-next" class="btn-outline">
          Próximo &rarr;
        </a>
      {% endif %}
      <a href="/courses/{{ course.getId() }}/modules" id="material-back" class="btn-secondary">
        &larr; Voltar para Módulos
      </a>
    </div>
  </div>
{% endblock %}
