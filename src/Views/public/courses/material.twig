{# templates/public/courses/material.twig #}
{% extends 'layouts/base.twig' %}

{% block title %}{{ material.title }} - {{ course.title }}{% endblock %}

{% block content %}
  <h1>{{ material.title }}</h1>
  <p><strong>Curso:</strong> <a href="/courses/{{ course.id }}">{{ course.title }}</a></p>

  {% if material.content %}
    {% set url  = material.content starts with 'http' ? material.content : '/' ~ material.content %}
    {% set type = material.contentType %}

    {# Vídeo #}
    {% if type starts with 'video/' %}
      <video controls width="100%" style="max-height: 80vh;">
        <source src="{{ url }}" type="{{ type }}">
        Seu navegador não suporta vídeo.
      </video>

    {# Áudio #}
    {% elseif type starts with 'audio/' %}
      <audio controls style="width:100%;">
        <source src="{{ url }}" type="{{ type }}">
        Seu navegador não suporta áudio.
      </audio>

    {# PDF #}
    {% elseif type == 'application/pdf' %}
      <embed src="{{ url }}" type="application/pdf" width="100%" height="80vh" />

    {# Imagem #}
    {% elseif type starts with 'image/' %}
      <img src="{{ url }}" alt="{{ material.title }}" style="max-width:100%; height:auto;" />

    {# Link genérico (embeda em iframe) #}
    {% else %}
      <iframe src="{{ url }}" width="100%" height="80vh" frameborder="0">
        Seu navegador não consegue exibir este conteúdo.
      </iframe>
    {% endif %}

  {% else %}
    <p>Nenhum conteúdo disponível para este material.</p>
  {% endif %}

  <p class="mt-4">
    <a href="/courses/{{ course.id }}/materials">← Voltar à lista de materiais</a>
  </p>
{% endblock %}
