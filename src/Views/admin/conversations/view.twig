{% extends 'layouts/main.twig' %}

{% block title %}Conversa #{{ conversation.id }}{% endblock %}

{% block content %}
<div class="container py-4">

  <a href="/admin/conversations" class="btn btn-secondary mb-3">« Voltar</a>

  <div class="card mb-4">
    <div class="card-header">
      <h2 class="h5 mb-0">Assunto: {{ conversation.subject }}</h2>
      <small class="text-muted">
        Criada por {{ conversation.createdBy }} em {{ conversation.createdAt|date("d/m/Y H:i") }}
      </small>
    </div>
    <div class="card-body">
      <p><strong>Participantes:</strong> {{ conversation.participantIds|join(', ') }}</p>
    </div>
  </div>

  <h3 class="h6 mb-3">Mensagens</h3>
  {% if messages is empty %}
    <div class="alert alert-info">Não há mensagens nesta conversa.</div>
  {% else %}
    <ul class="list-group mb-4">
      {% for msg in messages %}
        <li class="list-group-item">
          <div class="small text-muted">
            #{{ msg.id }} – {{ msg.authorName }} em {{ msg.createdAt|date("d/m/Y H:i") }}
          </div>
          <p class="mb-1">{{ msg.content }}</p>
        </li>
      {% endfor %}
    </ul>
  {% endif %}

  <a href="/admin/conversations" class="btn btn-secondary">Fechar</a>
</div>
{% endblock %}
