{% extends 'layouts/base.twig' %}

{% block content %}
  <section>
    <h1>{{ course ? 'Editar Curso' : 'Novo Curso' }}</h1>
    <p><a href="/curso">Voltar à lista de cursos</a></p>

    <form action="{{ course ? '/curso/' ~ course.id ~ '/update' : '/curso/store' }}" method="post">
      <div>
        <label for="title">Título</label><br>
        <input type="text" id="title" name="title" value="{{ course.title|default('') }}" required />
      </div>

      <div>
        <label for="short_description">Descrição Curta</label><br>
        <textarea id="short_description" name="short_description" rows="3" required>{{ course.shortDescription|default('') }}</textarea>
      </div>

      <div>
        <label for="long_description">Descrição Longa</label><br>
        <textarea id="long_description" name="long_description" rows="5">{{ course.longDescription|default('') }}</textarea>
      </div>

      <div>
        <label for="category_id">Categoria (ID)</label><br>
        <input type="number" id="category_id" name="category_id" value="{{ course.categoryId|default('') }}" />
      </div>

      <div>
        <label for="status">Status</label><br>
        <select id="status" name="status">
          {% for s in ['active','draft','archived'] %}
            <option value="{{ s }}" {{ course.status==s ? 'selected' : '' }}>{{ s|capitalize }}</option>
          {% endfor %}
        </select>
      </div>

      <div>
        <label for="enrollment_method">Método de Inscrição</label><br>
        <select id="enrollment_method" name="enrollment_method">
          {% for m in ['open'] %}
            <option value="{{ m }}" {{ course.enrollmentMethod==m ? 'selected' : '' }}>{{ m|capitalize }}</option>
          {% endfor %}
        </select>
      </div>

      <div>
        <label for="cover_image">URL da Imagem de Capa</label><br>
        <input type="url" id="cover_image" name="cover_image" value="{{ course.coverImage|default('') }}" />
      </div>

      <div>
        <label for="price">Preço (R$)</label><br>
        <input type="number" id="price" name="price" step="0.01" value="{{ course.price is defined ? course.price : '' }}" />
      </div>

      <div>
        <label for="course_requirements">Requisitos</label><br>
        <textarea id="course_requirements" name="course_requirements" rows="4">{{ course.courseRequirements|default('') }}</textarea>
      </div>

      <div>
        <label for="learning_objectives">Objetivos de Aprendizagem</label><br>
        <textarea id="learning_objectives" name="learning_objectives" rows="4">{{ course.learningObjectives|default('') }}</textarea>
      </div>

      <div>
        <button type="submit">{{ course ? 'Atualizar' : 'Criar' }}</button>
        <a href="/curso">Cancelar</a>
      </div>
    </form>
  </section>
{% endblock %}
